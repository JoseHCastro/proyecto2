import{r as j,u as P,b as m,d as t,e,h as T,w as a,f as l,v as C,j as r,t as i,m as _,k as u,F as y,z as w,i as $,p as B,x as U}from"./app-CYSvmcR8.js";import{_ as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-R4kQx9DT.js";import{c as M,_ as p}from"./AppFooter-DaHgPrIF.js";import{_ as v}from"./index-DbHijLDh.js";import{_ as R,a as G,b as z}from"./CardHeader.vue_vue_type_script_setup_true_lang-CazDfcUj.js";import{_ as O}from"./CardDescription.vue_vue_type_script_setup_true_lang-B-VIl_s4.js";import{_ as Z}from"./CardTitle.vue_vue_type_script_setup_true_lang-Zu7LdWln.js";import{_ as q,a as H,b as J,c as K,d as Q}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BitTFnif.js";import{_ as W}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-CEpoLVNQ.js";import{_ as h}from"./Input.vue_vue_type_script_setup_true_lang-Ct8pUTiU.js";import{_ as k}from"./Label.vue_vue_type_script_setup_true_lang-C5ivKHaI.js";import{_ as X}from"./Textarea.vue_vue_type_script_setup_true_lang-DhBq6UU8.js";import{_ as V,a as S,b,c as f,d as E,e as c}from"./TableCell.vue_vue_type_script_setup_true_lang-BknAQ6j1.js";import{e as Y,s as N,c as ee}from"./useSweetAlert-DaBq0Crb.js";import{A as se}from"./arrow-left-BFujA4t7.js";import{P as te}from"./pencil-Dy5wFOOE.js";import{P as ae}from"./plus-DGscaRg9.js";import{T as le}from"./trash-2-DJWz_4zC.js";import{C as oe}from"./calendar-B0__q50w.js";import{C as re}from"./ThemeSwitcher.vue_vue_type_script_setup_true_lang-RQb2PAcX.js";import"./useForwardExpose-C04IyDGt.js";import"./RovingFocusGroup-CF_7D-JK.js";import"./VisuallyHidden-BhR3rBEy.js";import"./sweetalert2.esm.all-NNS-RXd7.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=M("RulerIcon",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=M("ScaleIcon",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),ne={class:"py-12"},ue={class:"mx-auto max-w-4xl sm:px-6 lg:px-8"},me={class:"mb-4"},fe={class:"flex items-start justify-between"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_e={class:"space-y-2"},pe={class:"text-base"},ge={class:"space-y-2"},xe={class:"text-base"},ye={class:"space-y-2"},ve={class:"text-base"},ke={class:"space-y-2"},be={class:"space-y-2"},we={class:"flex gap-2"},$e={key:0,class:"border-t pt-6 space-y-4"},he={class:"space-y-2"},Ce={class:"text-base"},Ve={class:"space-y-2"},Se={class:"text-base whitespace-pre-wrap"},Ee={key:1,class:"border-t pt-6 space-y-4"},Ne={class:"flex items-center justify-between"},Me={class:"grid grid-cols-2 gap-4"},De={class:"space-y-2"},Ae={key:0,class:"text-sm text-destructive"},Le={class:"space-y-2"},Ie={key:0,class:"text-sm text-destructive"},je={class:"space-y-2"},Pe={key:0,class:"text-sm text-destructive"},Te={class:"space-y-2"},Be={key:0,class:"text-sm text-destructive"},Ue={class:"flex justify-end gap-3"},Fe={key:0,class:"rounded-md border"},Re={class:"flex items-center gap-1"},Ge={class:"flex items-center gap-1"},ze={key:1,class:"text-center py-8 text-muted-foreground"},Oe={key:2,class:"border-t pt-6 space-y-4"},Ze={class:"flex items-center justify-between"},qe={key:0,class:"rounded-md border"},He={class:"flex items-center gap-2"},Je={class:"flex items-center gap-2"},Ke={key:1,class:"text-center py-8 text-muted-foreground"},bs={__name:"Show",props:{user:Object,mediciones:Array,asistencias:Array},setup(d){const D=d,g=j(!1),n=P({socio_id:D.user.id,peso_kg:"",estatura_cm:"",grasa_corporal:"",notas:""}),A=()=>{n.post("/mediciones-progreso",{onSuccess:()=>{N({title:"¡Registrado!",text:"La medición de progreso ha sido registrada correctamente"}),n.reset(),g.value=!1},onError:()=>{Y({title:"Error",text:"Hubo un problema al registrar la medición"})}})},L=async x=>{(await ee({title:"¿Eliminar medición?",text:"Esta acción no se puede deshacer",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed&&U.delete(`/mediciones-progreso/${x}`,{onSuccess:()=>{N({title:"¡Eliminado!",text:"La medición ha sido eliminada correctamente"})}})},I=(x,s)=>{const o=s/100;return(x/(o*o)).toFixed(2)};return(x,s)=>(u(),m(y,null,[t(e(T),{title:"Ver Usuario"}),t(F,null,{header:a(()=>[...s[6]||(s[6]=[l("h2",{class:"text-xl font-semibold leading-tight text-foreground"}," Detalles del Usuario ",-1)])]),default:a(()=>[l("div",ne,[l("div",ue,[l("div",me,[t(e(p),{variant:"ghost",size:"sm","as-child":""},{default:a(()=>[t(e(C),{href:"/users"},{default:a(()=>[t(e(se),{class:"mr-2 h-4 w-4"}),s[7]||(s[7]=r(" Volver a la lista ",-1))]),_:1})]),_:1})]),t(e(R),null,{default:a(()=>[t(e(G),null,{default:a(()=>[l("div",fe,[l("div",null,[t(e(Z),{class:"text-2xl"},{default:a(()=>[r(i(d.user.name),1)]),_:1}),t(e(O),{class:"text-base mt-1"},{default:a(()=>[r(i(d.user.email),1)]),_:1})]),t(e(p),{"as-child":""},{default:a(()=>[t(e(C),{href:`/users/${d.user.id}/edit`},{default:a(()=>[t(e(te),{class:"mr-2 h-4 w-4"}),s[8]||(s[8]=r(" Editar ",-1))]),_:1},8,["href"])]),_:1})])]),_:1}),t(e(z),{class:"space-y-6"},{default:a(()=>[l("div",ce,[l("div",_e,[s[9]||(s[9]=l("label",{class:"text-sm font-medium text-muted-foreground"},"Email",-1)),l("p",pe,i(d.user.email),1)]),l("div",ge,[s[10]||(s[10]=l("label",{class:"text-sm font-medium text-muted-foreground"},"CI",-1)),l("p",xe,i(d.user.ci||"No especificado"),1)]),l("div",ye,[s[11]||(s[11]=l("label",{class:"text-sm font-medium text-muted-foreground"},"Teléfono",-1)),l("p",ve,i(d.user.telefono||"No especificado"),1)]),l("div",ke,[s[12]||(s[12]=l("label",{class:"text-sm font-medium text-muted-foreground"},"Estado",-1)),l("div",null,[t(e(v),{variant:d.user.estado==="activo"?"default":"destructive"},{default:a(()=>[r(i(d.user.estado),1)]),_:1},8,["variant"])])]),l("div",be,[s[13]||(s[13]=l("label",{class:"text-sm font-medium text-muted-foreground"},"Roles",-1)),l("div",we,[(u(!0),m(y,null,w(d.user.roles,o=>(u(),$(e(v),{variant:"outline",key:o.id},{default:a(()=>[r(i(o.name),1)]),_:2},1024))),128))])])]),d.user.roles.some(o=>o.name==="Instructor")?(u(),m("div",$e,[s[16]||(s[16]=l("h3",{class:"text-lg font-medium"},"Información de Instructor",-1)),l("div",he,[s[14]||(s[14]=l("label",{class:"text-sm font-medium text-muted-foreground"},"Especialidades",-1)),l("p",Ce,i(d.user.especialidades||"No especificado"),1)]),l("div",Ve,[s[15]||(s[15]=l("label",{class:"text-sm font-medium text-muted-foreground"},"Biografía",-1)),l("p",Se,i(d.user.biografia||"No especificado"),1)])])):_("",!0),d.user.roles.some(o=>o.name==="Cliente")?(u(),m("div",Ee,[l("div",Ne,[s[25]||(s[25]=l("h3",{class:"text-lg font-medium"},"Progreso",-1)),t(e(q),{open:g.value,"onUpdate:open":s[5]||(s[5]=o=>g.value=o)},{default:a(()=>[t(e(W),{"as-child":""},{default:a(()=>[t(e(p),null,{default:a(()=>[t(e(ae),{class:"mr-2 h-4 w-4"}),s[17]||(s[17]=r(" Añadir Medición ",-1))]),_:1})]),_:1}),t(e(H),{class:"sm:max-w-[500px]"},{default:a(()=>[t(e(J),null,{default:a(()=>[t(e(K),null,{default:a(()=>[...s[18]||(s[18]=[r("Nueva Medición de Progreso",-1)])]),_:1}),t(e(Q),null,{default:a(()=>[...s[19]||(s[19]=[r(" Registra las mediciones del socio ",-1)])]),_:1})]),_:1}),l("form",{onSubmit:B(A,["prevent"]),class:"space-y-4"},[l("div",Me,[l("div",De,[t(e(k),{for:"peso_kg"},{default:a(()=>[...s[20]||(s[20]=[r("Peso (kg) *",-1)])]),_:1}),t(e(h),{id:"peso_kg",modelValue:e(n).peso_kg,"onUpdate:modelValue":s[0]||(s[0]=o=>e(n).peso_kg=o),type:"number",step:"0.1",required:""},null,8,["modelValue"]),e(n).errors.peso_kg?(u(),m("span",Ae,i(e(n).errors.peso_kg),1)):_("",!0)]),l("div",Le,[t(e(k),{for:"estatura_cm"},{default:a(()=>[...s[21]||(s[21]=[r("Estatura (cm) *",-1)])]),_:1}),t(e(h),{id:"estatura_cm",modelValue:e(n).estatura_cm,"onUpdate:modelValue":s[1]||(s[1]=o=>e(n).estatura_cm=o),type:"number",step:"0.1",required:""},null,8,["modelValue"]),e(n).errors.estatura_cm?(u(),m("span",Ie,i(e(n).errors.estatura_cm),1)):_("",!0)])]),l("div",je,[t(e(k),{for:"grasa_corporal"},{default:a(()=>[...s[22]||(s[22]=[r("% Grasa Corporal",-1)])]),_:1}),t(e(h),{id:"grasa_corporal",modelValue:e(n).grasa_corporal,"onUpdate:modelValue":s[2]||(s[2]=o=>e(n).grasa_corporal=o),type:"number",step:"0.1",min:"0",max:"100"},null,8,["modelValue"]),e(n).errors.grasa_corporal?(u(),m("span",Pe,i(e(n).errors.grasa_corporal),1)):_("",!0)]),l("div",Te,[t(e(k),{for:"notas"},{default:a(()=>[...s[23]||(s[23]=[r("Notas",-1)])]),_:1}),t(e(X),{id:"notas",modelValue:e(n).notas,"onUpdate:modelValue":s[3]||(s[3]=o=>e(n).notas=o),placeholder:"Observaciones adicionales...",rows:"3"},null,8,["modelValue"]),e(n).errors.notas?(u(),m("span",Be,i(e(n).errors.notas),1)):_("",!0)]),l("div",Ue,[t(e(p),{type:"button",variant:"outline",onClick:s[4]||(s[4]=o=>g.value=!1)},{default:a(()=>[...s[24]||(s[24]=[r(" Cancelar ",-1)])]),_:1}),t(e(p),{type:"submit",disabled:e(n).processing},{default:a(()=>[r(i(e(n).processing?"Guardando...":"Guardar"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1},8,["open"])]),d.mediciones&&d.mediciones.length>0?(u(),m("div",Fe,[t(e(V),null,{default:a(()=>[t(e(S),null,{default:a(()=>[t(e(b),null,{default:a(()=>[t(e(f),null,{default:a(()=>[...s[26]||(s[26]=[r("Fecha",-1)])]),_:1}),t(e(f),null,{default:a(()=>[...s[27]||(s[27]=[r("Peso",-1)])]),_:1}),t(e(f),null,{default:a(()=>[...s[28]||(s[28]=[r("Estatura",-1)])]),_:1}),t(e(f),null,{default:a(()=>[...s[29]||(s[29]=[r("IMC",-1)])]),_:1}),t(e(f),null,{default:a(()=>[...s[30]||(s[30]=[r("Grasa",-1)])]),_:1}),t(e(f),null,{default:a(()=>[...s[31]||(s[31]=[r("Notas",-1)])]),_:1}),t(e(f),{class:"text-right"},{default:a(()=>[...s[32]||(s[32]=[r("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(e(E),null,{default:a(()=>[(u(!0),m(y,null,w(d.mediciones,o=>(u(),$(e(b),{key:o.id},{default:a(()=>[t(e(c),{class:"font-medium"},{default:a(()=>[r(i(new Date(o.medido_en).toLocaleDateString("es-ES")),1)]),_:2},1024),t(e(c),null,{default:a(()=>[l("div",Re,[t(e(de),{class:"h-4 w-4 text-muted-foreground"}),r(" "+i(o.peso_kg)+" kg ",1)])]),_:2},1024),t(e(c),null,{default:a(()=>[l("div",Ge,[t(e(ie),{class:"h-4 w-4 text-muted-foreground"}),r(" "+i(o.estatura_cm)+" cm ",1)])]),_:2},1024),t(e(c),null,{default:a(()=>[t(e(v),{variant:"outline"},{default:a(()=>[r(i(I(o.peso_kg,o.estatura_cm)),1)]),_:2},1024)]),_:2},1024),t(e(c),null,{default:a(()=>[r(i(o.grasa_corporal?o.grasa_corporal+"%":"-"),1)]),_:2},1024),t(e(c),{class:"max-w-xs truncate"},{default:a(()=>[r(i(o.notas||"-"),1)]),_:2},1024),t(e(c),{class:"text-right"},{default:a(()=>[t(e(p),{variant:"ghost",size:"sm",onClick:Qe=>L(o.id)},{default:a(()=>[t(e(le),{class:"h-4 w-4 text-destructive"})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(u(),m("div",ze,[...s[33]||(s[33]=[l("p",null,"No hay mediciones de progreso registradas",-1)])]))])):_("",!0),d.user.roles.some(o=>o.name==="Cliente")?(u(),m("div",Oe,[l("div",Ze,[s[34]||(s[34]=l("h3",{class:"text-lg font-medium"},"Asistencia",-1)),t(e(v),{variant:"secondary"},{default:a(()=>[r(" Total: "+i(d.asistencias?.length||0),1)]),_:1})]),d.asistencias&&d.asistencias.length>0?(u(),m("div",qe,[t(e(V),null,{default:a(()=>[t(e(S),null,{default:a(()=>[t(e(b),null,{default:a(()=>[t(e(f),null,{default:a(()=>[...s[35]||(s[35]=[r("Fecha",-1)])]),_:1}),t(e(f),null,{default:a(()=>[...s[36]||(s[36]=[r("Hora",-1)])]),_:1}),t(e(f),null,{default:a(()=>[...s[37]||(s[37]=[r("Día de la Semana",-1)])]),_:1})]),_:1})]),_:1}),t(e(E),null,{default:a(()=>[(u(!0),m(y,null,w(d.asistencias,o=>(u(),$(e(b),{key:o.id},{default:a(()=>[t(e(c),{class:"font-medium"},{default:a(()=>[l("div",He,[t(e(oe),{class:"h-4 w-4 text-muted-foreground"}),r(" "+i(new Date(o.asistio_en).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})),1)])]),_:2},1024),t(e(c),null,{default:a(()=>[l("div",Je,[t(e(re),{class:"h-4 w-4 text-muted-foreground"}),r(" "+i(new Date(o.asistio_en).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})),1)])]),_:2},1024),t(e(c),null,{default:a(()=>[r(i(new Date(o.asistio_en).toLocaleDateString("es-ES",{weekday:"long"})),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(u(),m("div",Ke,[...s[38]||(s[38]=[l("p",null,"No hay asistencias registradas",-1)])]))])):_("",!0)]),_:1})]),_:1})])])]),_:1})],64))}};export{bs as default};
