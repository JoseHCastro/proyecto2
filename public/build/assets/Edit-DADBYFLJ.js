import{r as w,u as N,b as u,d as t,e as o,h as z,w as l,f as a,p as E,m as f,j as c,k as m,F as v,z as S,t as _,v as F,x as H}from"./app-CYSvmcR8.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-R4kQx9DT.js";import{_ as g}from"./AppFooter-DaHgPrIF.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-Ct8pUTiU.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-C5ivKHaI.js";import{e as j,s as A}from"./useSweetAlert-DaBq0Crb.js";import{C as b}from"./ThemeSwitcher.vue_vue_type_script_setup_true_lang-RQb2PAcX.js";import"./useForwardExpose-C04IyDGt.js";import"./RovingFocusGroup-CF_7D-JK.js";import"./VisuallyHidden-BhR3rBEy.js";import"./sweetalert2.esm.all-NNS-RXd7.js";const B={class:"py-12"},M={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},q={class:"overflow-hidden bg-background shadow-sm sm:rounded-lg border border-border"},L={class:"p-6 text-foreground"},U={class:"space-y-3"},I={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},J=["onClick"],O=["id","checked","onChange"],T=["for"],G={key:0,class:"text-sm text-destructive"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},P={class:"space-y-2"},Q={key:0,class:"text-sm text-destructive"},R={class:"space-y-2"},W={key:0,class:"text-sm text-destructive"},X={class:"flex justify-end gap-4"},de={__name:"Edit",props:{horario:Object},setup(y){const d=y,k=[{value:1,label:"Lunes"},{value:2,label:"Martes"},{value:3,label:"Miércoles"},{value:4,label:"Jueves"},{value:5,label:"Viernes"},{value:6,label:"Sábado"}],i=w(d.horario.dia_semana?d.horario.dia_semana.map(n=>Number(n)):[]),s=N({dia_semana:[],hora_inicio:d.horario.hora_inicio,hora_fin:d.horario.hora_fin}),V=n=>i.value.includes(Number(n)),h=n=>{const e=Number(n);i.value.includes(e)?i.value=i.value.filter(r=>r!==e):i.value=[...i.value,e]},C=()=>{s.dia_semana=i.value,console.log("Días seleccionados antes de enviar:",i.value),console.log("Form.dia_semana:",s.dia_semana),console.log("Form completo:",s.data()),s.put(`/horarios/${d.horario.id}`,{onSuccess:()=>{A({title:"¡Horario actualizado!",text:"El horario ha sido actualizado correctamente"}).then(()=>{H.visit("/horarios")})},onError:()=>{j({title:"Error al actualizar",text:"Hubo un problema al actualizar el horario"})}})};return(n,e)=>(m(),u(v,null,[t(o(z),{title:"Editar Horario"}),t(D,null,{header:l(()=>[...e[2]||(e[2]=[a("h2",{class:"text-xl font-semibold leading-tight text-foreground"}," Editar Horario ",-1)])]),default:l(()=>[a("div",B,[a("div",M,[a("div",q,[a("div",L,[a("form",{onSubmit:E(C,["prevent"]),class:"space-y-6"},[a("div",U,[t(o(p),null,{default:l(()=>[...e[3]||(e[3]=[c("Días de la semana",-1)])]),_:1}),a("div",I,[(m(),u(v,null,S(k,r=>a("div",{key:r.value,class:"flex items-center space-x-2 p-3 rounded-md border border-border hover:bg-accent transition-colors cursor-pointer",onClick:$=>h(r.value)},[a("input",{type:"checkbox",id:`dia-${r.value}`,checked:V(r.value),onChange:$=>h(r.value),class:"size-4 rounded border-input text-primary focus:ring-2 focus:ring-ring cursor-pointer"},null,40,O),a("label",{for:`dia-${r.value}`,class:"text-sm font-medium leading-none cursor-pointer select-none flex-1"},_(r.label),9,T)],8,J)),64))]),o(s).errors.dia_semana?(m(),u("div",G,_(o(s).errors.dia_semana),1)):f("",!0),e[4]||(e[4]=a("p",{class:"text-sm text-muted-foreground"}," Selecciona al menos un día de la semana ",-1))]),a("div",K,[a("div",P,[t(o(p),{for:"hora_inicio",class:"flex items-center gap-2"},{default:l(()=>[t(o(b),{class:"h-4 w-4"}),e[5]||(e[5]=c(" Hora de Inicio ",-1))]),_:1}),t(o(x),{id:"hora_inicio",type:"time",modelValue:o(s).hora_inicio,"onUpdate:modelValue":e[0]||(e[0]=r=>o(s).hora_inicio=r),required:"",step:"300",class:"text-lg"},null,8,["modelValue"]),o(s).errors.hora_inicio?(m(),u("div",Q,_(o(s).errors.hora_inicio),1)):f("",!0)]),a("div",R,[t(o(p),{for:"hora_fin",class:"flex items-center gap-2"},{default:l(()=>[t(o(b),{class:"h-4 w-4"}),e[6]||(e[6]=c(" Hora de Fin ",-1))]),_:1}),t(o(x),{id:"hora_fin",type:"time",modelValue:o(s).hora_fin,"onUpdate:modelValue":e[1]||(e[1]=r=>o(s).hora_fin=r),required:"",step:"300",class:"text-lg"},null,8,["modelValue"]),o(s).errors.hora_fin?(m(),u("div",W,_(o(s).errors.hora_fin),1)):f("",!0)])]),a("div",X,[t(o(g),{variant:"outline",type:"button","as-child":""},{default:l(()=>[t(o(F),{href:"/horarios"},{default:l(()=>[...e[7]||(e[7]=[c("Cancelar",-1)])]),_:1})]),_:1}),t(o(g),{type:"submit",disabled:o(s).processing},{default:l(()=>[...e[8]||(e[8]=[c("Actualizar",-1)])]),_:1},8,["disabled"])])],32)])])])])]),_:1})],64))}};export{de as default};
