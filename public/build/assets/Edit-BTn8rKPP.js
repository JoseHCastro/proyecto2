import{u as A,r as C,b as m,d as t,e,h as z,w as a,f as i,v as $,j as d,p as E,m as _,n as b,k as n,t as u,F as v,z as g,i as N,C as D,D as P}from"./app-CYSvmcR8.js";import{_ as U}from"./AppLayout.vue_vue_type_script_setup_true_lang-R4kQx9DT.js";import{_ as y}from"./AppFooter-DaHgPrIF.js";import{_ as q}from"./Input.vue_vue_type_script_setup_true_lang-Ct8pUTiU.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-C5ivKHaI.js";import{_ as B}from"./Textarea.vue_vue_type_script_setup_true_lang-DhBq6UU8.js";import{_ as M,a as j,b as F}from"./CardHeader.vue_vue_type_script_setup_true_lang-CazDfcUj.js";import{_ as L}from"./CardDescription.vue_vue_type_script_setup_true_lang-B-VIl_s4.js";import{_ as O}from"./CardTitle.vue_vue_type_script_setup_true_lang-Zu7LdWln.js";import{_ as H,a as J,b as T,c as X,d as G}from"./SelectItem.vue_vue_type_script_setup_true_lang-P3441g65.js";import{e as I,s as K}from"./useSweetAlert-DaBq0Crb.js";import{A as Q}from"./arrow-left-BFujA4t7.js";import"./useForwardExpose-C04IyDGt.js";import"./RovingFocusGroup-CF_7D-JK.js";import"./ThemeSwitcher.vue_vue_type_script_setup_true_lang-RQb2PAcX.js";import"./VisuallyHidden-BhR3rBEy.js";import"./check-Cq5oJblT.js";import"./sweetalert2.esm.all-NNS-RXd7.js";const R={class:"py-12"},W={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},Y={class:"mb-4"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ee={class:"space-y-2"},se={key:0,class:"text-sm text-red-500"},re={class:"space-y-2"},te={key:0,class:"text-sm text-red-500"},oe={class:"space-y-2"},ae={key:0,class:"text-sm text-red-500"},ie={class:"space-y-2"},le={key:0,class:"text-sm text-red-500"},de={class:"flex items-center space-x-3 p-3 border rounded-md"},ne={class:"space-y-2"},me={class:"border rounded-md p-4 max-h-64 overflow-y-auto space-y-2"},ue=["id","checked","onChange"],ce=["for"],pe={key:0,class:"text-sm text-red-500"},fe={class:"flex gap-4"},De={__name:"Edit",props:{paquete:Object,membresias:Array,sesiones:Array},setup(x){const c=x,r=A({nombre:c.paquete.nombre,descripcion:c.paquete.descripcion||"",precio:c.paquete.precio,membresia_id:c.paquete.membresia_id,activo:c.paquete.activo,sesiones:[]}),f=C(c.paquete.sesiones.map(l=>l.id)),V=l=>f.value.includes(l),k=l=>{const s=f.value.indexOf(l);s>-1?f.value.splice(s,1):f.value.push(l)},S=l=>{const s={1:"L",2:"M",3:"X",4:"J",5:"V",6:"S"},o=l.horario.dia_semana.map(h=>s[h]).join(",");return`${l.disciplina.nombre} - ${l.horario.hora_inicio.substring(0,5)}-${l.horario.hora_fin.substring(0,5)} (${o})`},w=()=>{r.sesiones=f.value,r.put(`/paquetes/${c.paquete.id}`,{onSuccess:()=>{K({title:"¡Actualizado!",text:"El paquete ha sido actualizado correctamente"})},onError:()=>{I({title:"Error",text:"Hubo un problema al actualizar el paquete"})}})};return(l,s)=>(n(),m(v,null,[t(e(z),{title:"Editar Paquete"}),t(U,null,{header:a(()=>[...s[5]||(s[5]=[i("h2",{class:"text-xl font-semibold leading-tight text-foreground"}," Editar Paquete ",-1)])]),default:a(()=>[i("div",R,[i("div",W,[i("div",Y,[t(e(y),{variant:"ghost",size:"sm","as-child":""},{default:a(()=>[t(e($),{href:"/paquetes"},{default:a(()=>[t(e(Q),{class:"h-4 w-4 mr-2"}),s[6]||(s[6]=d(" Volver ",-1))]),_:1})]),_:1})]),t(e(M),null,{default:a(()=>[t(e(j),null,{default:a(()=>[t(e(O),null,{default:a(()=>[...s[7]||(s[7]=[d("Editar Paquete",-1)])]),_:1}),t(e(L),null,{default:a(()=>[...s[8]||(s[8]=[d("Actualiza la información del paquete",-1)])]),_:1})]),_:1}),t(e(F),null,{default:a(()=>[i("form",{onSubmit:E(w,["prevent"]),class:"space-y-6"},[i("div",Z,[i("div",ee,[t(e(p),{for:"nombre"},{default:a(()=>[...s[9]||(s[9]=[d("Nombre *",-1)])]),_:1}),t(e(q),{id:"nombre",modelValue:e(r).nombre,"onUpdate:modelValue":s[0]||(s[0]=o=>e(r).nombre=o),type:"text",placeholder:"Nombre del paquete",class:b({"border-red-500":e(r).errors.nombre})},null,8,["modelValue","class"]),e(r).errors.nombre?(n(),m("p",se,u(e(r).errors.nombre),1)):_("",!0)]),i("div",re,[t(e(p),{for:"precio"},{default:a(()=>[...s[10]||(s[10]=[d("Precio *",-1)])]),_:1}),t(e(q),{id:"precio",modelValue:e(r).precio,"onUpdate:modelValue":s[1]||(s[1]=o=>e(r).precio=o),type:"number",step:"0.01",min:"0.01",placeholder:"0.00",class:b({"border-red-500":e(r).errors.precio})},null,8,["modelValue","class"]),e(r).errors.precio?(n(),m("p",te,u(e(r).errors.precio),1)):_("",!0)])]),i("div",oe,[t(e(p),{for:"membresia_id"},{default:a(()=>[...s[11]||(s[11]=[d("Membresía *",-1)])]),_:1}),t(e(H),{modelValue:e(r).membresia_id,"onUpdate:modelValue":s[2]||(s[2]=o=>e(r).membresia_id=o)},{default:a(()=>[t(e(J),{class:b({"border-red-500":e(r).errors.membresia_id})},{default:a(()=>[t(e(T),{placeholder:"Selecciona una membresía"})]),_:1},8,["class"]),t(e(X),null,{default:a(()=>[(n(!0),m(v,null,g(x.membresias,o=>(n(),N(e(G),{key:o.id,value:o.id},{default:a(()=>[d(u(o.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(r).errors.membresia_id?(n(),m("p",ae,u(e(r).errors.membresia_id),1)):_("",!0)]),i("div",ie,[t(e(p),{for:"descripcion"},{default:a(()=>[...s[12]||(s[12]=[d("Descripción",-1)])]),_:1}),t(e(B),{id:"descripcion",modelValue:e(r).descripcion,"onUpdate:modelValue":s[3]||(s[3]=o=>e(r).descripcion=o),placeholder:"Descripción del paquete",rows:"3",class:b({"border-red-500":e(r).errors.descripcion})},null,8,["modelValue","class"]),e(r).errors.descripcion?(n(),m("p",le,u(e(r).errors.descripcion),1)):_("",!0)]),i("div",de,[D(i("input",{type:"checkbox",id:"activo","onUpdate:modelValue":s[4]||(s[4]=o=>e(r).activo=o),class:"h-5 w-5 rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[P,e(r).activo]]),t(e(p),{for:"activo",class:"cursor-pointer font-medium"},{default:a(()=>[d(u(e(r).activo?"Activo":"Inactivo"),1)]),_:1})]),i("div",ne,[t(e(p),null,{default:a(()=>[...s[13]||(s[13]=[d("Sesiones * (Selecciona al menos una)",-1)])]),_:1}),i("div",me,[(n(!0),m(v,null,g(x.sesiones,o=>(n(),m("div",{key:o.id,class:"flex items-start space-x-2"},[i("input",{type:"checkbox",id:`sesion-${o.id}`,checked:V(o.id),onChange:h=>k(o.id),class:"mt-1 h-4 w-4 rounded border-gray-300"},null,40,ue),i("label",{for:`sesion-${o.id}`,class:"text-sm cursor-pointer flex-1"},u(S(o)),9,ce)]))),128))]),e(r).errors.sesiones?(n(),m("p",pe,u(e(r).errors.sesiones),1)):_("",!0)]),i("div",fe,[t(e(y),{type:"submit",disabled:e(r).processing},{default:a(()=>[...s[14]||(s[14]=[d(" Actualizar Paquete ",-1)])]),_:1},8,["disabled"]),t(e(y),{type:"button",variant:"outline","as-child":""},{default:a(()=>[t(e($),{href:"/paquetes"},{default:a(()=>[...s[15]||(s[15]=[d(" Cancelar ",-1)])]),_:1})]),_:1})])],32)]),_:1})]),_:1})])])]),_:1})],64))}};export{De as default};
