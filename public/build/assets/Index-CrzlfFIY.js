import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-R4kQx9DT.js";import{r as T,y as V,x as b,b as d,d as s,e,h as z,w as l,f as i,m as C,j as r,v as x,k as o,F as v,z as w,i as $,t as y,n as P}from"./app-CYSvmcR8.js";import{c as S,_ as h}from"./AppFooter-DaHgPrIF.js";import{_ as A}from"./Input.vue_vue_type_script_setup_true_lang-Ct8pUTiU.js";import{_ as I,a as L,b as U,c as _,d as F,e as p}from"./TableCell.vue_vue_type_script_setup_true_lang-BknAQ6j1.js";import{_ as H,a as M,b as G,c as O,d as k}from"./SelectItem.vue_vue_type_script_setup_true_lang-P3441g65.js";import{_ as j}from"./index-DbHijLDh.js";import{c as q,e as D,s as J}from"./useSweetAlert-DaBq0Crb.js";import{E as K}from"./eye-CCw4VRPt.js";import{P as Q}from"./pencil-Dy5wFOOE.js";import{T as R}from"./trash-2-DJWz_4zC.js";import"./useForwardExpose-C04IyDGt.js";import"./RovingFocusGroup-CF_7D-JK.js";import"./ThemeSwitcher.vue_vue_type_script_setup_true_lang-RQb2PAcX.js";import"./VisuallyHidden-BhR3rBEy.js";import"./check-Cq5oJblT.js";import"./sweetalert2.esm.all-NNS-RXd7.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=S("UserPlusIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),X={class:"py-12"},Y={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},Z={class:"overflow-hidden bg-background shadow-sm sm:rounded-lg border border-border"},ee={class:"p-6 text-foreground"},se={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},te={class:"flex gap-4 w-full md:w-auto"},le={key:0,class:"rounded-md border"},ae={class:"flex justify-end gap-2"},re={key:1,class:"mt-4 flex justify-center"},ie={class:"flex gap-1"},ke={__name:"Index",props:{users:Object,filters:Object},setup(n){const E=n,f=T(E.filters?.search||""),m=T(E.filters?.role||"");let g=null;V(f,u=>{g&&clearTimeout(g),g=setTimeout(()=>{const t={};u&&(t.search=u),m.value&&(t.role=m.value),b.get("/users",t,{replace:!0,preserveScroll:!0})},300)}),V(m,u=>{const t={};f.value&&(t.search=f.value),u&&(t.role=u),b.get("/users",t,{replace:!0,preserveScroll:!0})});const B=async u=>{(await q({title:"¿Eliminar usuario?",text:"Esta acción no se puede deshacer",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed&&b.delete(`/users/${u}`,{onSuccess:()=>{J({title:"¡Eliminado!",text:"El usuario ha sido eliminado correctamente"})},onError:()=>{D({title:"Error",text:"No se pudo eliminar el usuario"})}})};return(u,t)=>(o(),d(v,null,[s(e(z),{title:"Gestión de Usuarios"}),s(N,null,{header:l(()=>[...t[2]||(t[2]=[i("h2",{class:"text-xl font-semibold leading-tight text-foreground"}," Gestión de Usuarios ",-1)])]),default:l(()=>[i("div",X,[i("div",Y,[i("div",Z,[i("div",ee,[i("div",se,[i("div",te,[s(e(A),{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=a=>f.value=a),placeholder:"Buscar por nombre, email o CI...",class:"w-full md:w-64"},null,8,["modelValue"]),s(e(H),{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=a=>m.value=a)},{default:l(()=>[s(e(M),{class:"w-[180px]"},{default:l(()=>[s(e(G),{placeholder:"Filtrar por rol"})]),_:1}),s(e(O),null,{default:l(()=>[s(e(k),{value:""},{default:l(()=>[...t[3]||(t[3]=[r("Todos",-1)])]),_:1}),s(e(k),{value:"personal"},{default:l(()=>[...t[4]||(t[4]=[r("Personal",-1)])]),_:1}),s(e(k),{value:"cliente"},{default:l(()=>[...t[5]||(t[5]=[r("Clientes",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s(e(h),{"as-child":""},{default:l(()=>[s(e(x),{href:"/users/create"},{default:l(()=>[s(e(W),{class:"mr-2 h-4 w-4"}),t[6]||(t[6]=r(" Nuevo Usuario ",-1))]),_:1})]),_:1})]),n.users&&n.users.data?(o(),d("div",le,[s(e(I),null,{default:l(()=>[s(e(L),null,{default:l(()=>[s(e(U),null,{default:l(()=>[s(e(_),null,{default:l(()=>[...t[7]||(t[7]=[r("Nombre",-1)])]),_:1}),s(e(_),null,{default:l(()=>[...t[8]||(t[8]=[r("Email",-1)])]),_:1}),s(e(_),null,{default:l(()=>[...t[9]||(t[9]=[r("Rol",-1)])]),_:1}),s(e(_),null,{default:l(()=>[...t[10]||(t[10]=[r("Estado",-1)])]),_:1}),s(e(_),{class:"text-right"},{default:l(()=>[...t[11]||(t[11]=[r("Acciones",-1)])]),_:1})]),_:1})]),_:1}),s(e(F),null,{default:l(()=>[(o(!0),d(v,null,w(n.users.data,a=>(o(),$(e(U),{key:a.id},{default:l(()=>[s(e(p),{class:"font-medium"},{default:l(()=>[r(y(a.name),1)]),_:2},1024),s(e(p),null,{default:l(()=>[r(y(a.email),1)]),_:2},1024),s(e(p),null,{default:l(()=>[(o(!0),d(v,null,w(a.roles,c=>(o(),$(e(j),{variant:"outline",key:c.id,class:"mr-1"},{default:l(()=>[r(y(c.name),1)]),_:2},1024))),128))]),_:2},1024),s(e(p),null,{default:l(()=>[s(e(j),{variant:a.estado==="activo"?"default":"destructive"},{default:l(()=>[r(y(a.estado),1)]),_:2},1032,["variant"])]),_:2},1024),s(e(p),{class:"text-right"},{default:l(()=>[i("div",ae,[s(e(h),{variant:"outline",size:"sm","as-child":"",title:"Ver"},{default:l(()=>[s(e(x),{href:`/users/${a.id}`},{default:l(()=>[s(e(K),{class:"h-4 w-4"})]),_:1},8,["href"])]),_:2},1024),s(e(h),{variant:"outline",size:"sm","as-child":"",title:"Editar"},{default:l(()=>[s(e(x),{href:`/users/${a.id}/edit`},{default:l(()=>[s(e(Q),{class:"h-4 w-4"})]),_:1},8,["href"])]),_:2},1024),s(e(h),{variant:"destructive",size:"sm",onClick:c=>B(a.id),title:"Eliminar"},{default:l(()=>[s(e(R),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):C("",!0),n.users&&n.users.links&&n.users.links.length>3?(o(),d("div",re,[i("div",ie,[(o(!0),d(v,null,w(n.users.links,(a,c)=>(o(),$(e(x),{key:c,href:a.url||"#",innerHTML:a.label,class:P(["px-3 py-1 border rounded text-sm",{"bg-primary text-primary-foreground":a.active,"opacity-50 cursor-not-allowed":!a.url}])},null,8,["href","innerHTML","class"]))),128))])])):C("",!0)])])])])]),_:1})],64))}};export{ke as default};
