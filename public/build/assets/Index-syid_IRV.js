import{_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-BHJDPCZ8.js";import{r as k,y as E,x as h,b as f,d as t,e,h as A,w as a,f as i,m as T,j as r,v as p,k as n,F as g,z as V,i as B,t as v,n as M}from"./app-tXC2pLZf.js";import{_ as b}from"./AppFooter-TW4fO1XT.js";import{_ as z}from"./Input.vue_vue_type_script_setup_true_lang-DRUFobxk.js";import{_ as S,a as L,b as C,c,d as P,e as _}from"./TableCell.vue_vue_type_script_setup_true_lang-D4rmKOhy.js";import{_ as D,a as F,b as I,c as G,d as w}from"./SelectItem.vue_vue_type_script_setup_true_lang-DhfW_bte.js";import{_ as H}from"./index-B166OT94.js";import{c as O,e as U,s as q}from"./useSweetAlert-DaBq0Crb.js";import{P as J}from"./plus-DMa57-zF.js";import{E as K}from"./eye-DlhLx2LV.js";import{P as Q}from"./pencil-CrtCWLGJ.js";import{T as R}from"./trash-2-Y5mZZbmY.js";import"./useForwardExpose-Bfd518nw.js";import"./RovingFocusGroup-BNHTgRLt.js";import"./ThemeSwitcher.vue_vue_type_script_setup_true_lang-DAe2Mvpc.js";import"./VisuallyHidden-BH3P4Ghq.js";import"./check-B_vWNd7n.js";import"./sweetalert2.esm.all-NNS-RXd7.js";const W={class:"py-12"},X={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},Y={class:"overflow-hidden bg-background shadow-sm sm:rounded-lg border border-border"},Z={class:"p-6 text-foreground"},ee={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},te={class:"flex gap-4 w-full md:w-auto"},se={key:0,class:"rounded-md border"},ae={class:"flex justify-end gap-2"},le={key:1,class:"mt-4 flex justify-center"},re={class:"flex gap-1"},ke={__name:"Index",props:{membresias:Object,filters:Object},setup(o){const $=o,u=k($.filters?.search||""),m=k($.filters?.activo||"");let x=null;E(u,d=>{x&&clearTimeout(x),x=setTimeout(()=>{const s={};d&&(s.search=d),m.value&&(s.activo=m.value),h.get("/membresias",s,{replace:!0,preserveScroll:!0})},300)}),E(m,d=>{const s={};u.value&&(s.search=u.value),d&&(s.activo=d),h.get("/membresias",s,{replace:!0,preserveScroll:!0})});const N=async d=>{(await O({title:"¿Eliminar membresía?",text:"Esta acción no se puede deshacer",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed&&h.delete(`/membresias/${d}`,{onSuccess:()=>{q({title:"¡Eliminado!",text:"La membresía ha sido eliminada correctamente"})},onError:()=>{U({title:"Error",text:"No se pudo eliminar la membresía"})}})};return(d,s)=>(n(),f(g,null,[t(e(A),{title:"Gestión de Membresías"}),t(j,null,{header:a(()=>[...s[2]||(s[2]=[i("h2",{class:"text-xl font-semibold leading-tight text-foreground"}," Gestión de Membresías ",-1)])]),default:a(()=>[i("div",W,[i("div",X,[i("div",Y,[i("div",Z,[i("div",ee,[i("div",te,[t(e(z),{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=l=>u.value=l),placeholder:"Buscar por nombre o descripción...",class:"w-full md:w-64"},null,8,["modelValue"]),t(e(D),{modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=l=>m.value=l)},{default:a(()=>[t(e(F),{class:"w-[180px]"},{default:a(()=>[t(e(I),{placeholder:"Filtrar por estado"})]),_:1}),t(e(G),null,{default:a(()=>[t(e(w),{value:""},{default:a(()=>[...s[3]||(s[3]=[r("Todos",-1)])]),_:1}),t(e(w),{value:"true"},{default:a(()=>[...s[4]||(s[4]=[r("Activos",-1)])]),_:1}),t(e(w),{value:"false"},{default:a(()=>[...s[5]||(s[5]=[r("Inactivos",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(e(b),{"as-child":""},{default:a(()=>[t(e(p),{href:"/membresias/create"},{default:a(()=>[t(e(J),{class:"mr-2 h-4 w-4"}),s[6]||(s[6]=r(" Nueva Membresía ",-1))]),_:1})]),_:1})]),o.membresias&&o.membresias.data?(n(),f("div",se,[t(e(S),null,{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(C),null,{default:a(()=>[t(e(c),null,{default:a(()=>[...s[7]||(s[7]=[r("Nombre",-1)])]),_:1}),t(e(c),null,{default:a(()=>[...s[8]||(s[8]=[r("Descripción",-1)])]),_:1}),t(e(c),null,{default:a(()=>[...s[9]||(s[9]=[r("Duración (días)",-1)])]),_:1}),t(e(c),null,{default:a(()=>[...s[10]||(s[10]=[r("Estado",-1)])]),_:1}),t(e(c),{class:"text-right"},{default:a(()=>[...s[11]||(s[11]=[r("Acciones",-1)])]),_:1})]),_:1})]),_:1}),t(e(P),null,{default:a(()=>[(n(!0),f(g,null,V(o.membresias.data,l=>(n(),B(e(C),{key:l.id},{default:a(()=>[t(e(_),{class:"font-medium"},{default:a(()=>[r(v(l.nombre),1)]),_:2},1024),t(e(_),null,{default:a(()=>[r(v(l.descripcion||"-"),1)]),_:2},1024),t(e(_),null,{default:a(()=>[r(v(l.duracion_dias),1)]),_:2},1024),t(e(_),null,{default:a(()=>[t(e(H),{variant:l.activo?"default":"destructive"},{default:a(()=>[r(v(l.activo?"Activo":"Inactivo"),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(_),{class:"text-right"},{default:a(()=>[i("div",ae,[t(e(b),{variant:"outline",size:"sm","as-child":"",title:"Ver"},{default:a(()=>[t(e(p),{href:`/membresias/${l.id}`},{default:a(()=>[t(e(K),{class:"h-4 w-4"})]),_:1},8,["href"])]),_:2},1024),t(e(b),{variant:"outline",size:"sm","as-child":"",title:"Editar"},{default:a(()=>[t(e(p),{href:`/membresias/${l.id}/edit`},{default:a(()=>[t(e(Q),{class:"h-4 w-4"})]),_:1},8,["href"])]),_:2},1024),t(e(b),{variant:"destructive",size:"sm",onClick:y=>N(l.id),title:"Eliminar"},{default:a(()=>[t(e(R),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):T("",!0),o.membresias&&o.membresias.links&&o.membresias.links.length>3?(n(),f("div",le,[i("div",re,[(n(!0),f(g,null,V(o.membresias.links,(l,y)=>(n(),B(e(p),{key:y,href:l.url||"#",innerHTML:l.label,class:M(["px-3 py-1 border rounded text-sm",{"bg-primary text-primary-foreground":l.active,"opacity-50 cursor-not-allowed":!l.url}])},null,8,["href","innerHTML","class"]))),128))])])):T("",!0)])])])])]),_:1})],64))}};export{ke as default};
